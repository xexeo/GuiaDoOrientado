% Pacotes usados
% from KOMA
\usepackage{scrhack} % evita warning do lst listings
\usepackage{indentfirst}
\usepackage{needspace}
\usepackage{outlines}
% usa mais interfaces de saída
%  solution for the error “no room for a new \write” (This is a deep magic over TeX)
%\usepackage{morewrites}
%\morewritessetup{allocate=10}

% texto em português
% https://tex.stackexchange.com/questions/13172/detect-which-tex-engine-is-used
\usepackage{iftex}
\ifpdftex
	\typeout{^^J *** PDF MODE ***}
	\usepackage{cmap} % Make PDF files searchable and copyable
	\usepackage[utf8]{inputenc}
	\usepackage{scrwfile}
\fi
\ifluatex
	\typeout{^^J *** LuaLaTeX MODE ***}
\fi

\usepackage[brazilian]{babel}
%\usepackage[T1]{fontenc}

% FONTES USADAS!!!
\usepackage{lmodern}
\usepackage{marvosym}
% bbding tem cross também
\let\Cross\relax
\usepackage{bbding}

\usepackage[dvipsnames]{xcolor}

%%%%%%%%%%%%%%%%%%%% l3packages
% This collection contains implementations for aspects of the LATEX3 kernel, dealing with higher-level ideas such as the Designer Interface
% pacotes i3packages
% frações mais flexíveis
\usepackage{xfrac}
% provides a high-level interface for declaring document commands
\usepackage{xparse}

%%%%%%%%%%%%%%%%%%% FIM l3packages




% to use \currenttime
\usepackage{datetime}

% avoid pdf warning messages from pdflatex
%\pdfminorversion=6



%\usepackage{kpfonts}

% melhor typesetting
\usepackage{microtype}

%
%\usepackage{showframe}
%\usepackage[a4paper]{geometry}
%\usepackage[a4paper,top=2cm,left=2cm,right=2cm,bottom=2cm]{geometry}
%Letra  de início de parágrafo
%\usepackage{lettrine}

% controle melhor dos captions
% Captions e SUB FIGURAS (subcations resolve esse problema melhor)
\usepackage[centerlast,font={small}]{caption}
\setlength{\captionmargin}{1cm}
\usepackage{subcaption}

% usa o H em imagens
%\usepackage{float}

% pacote para gerenciar quotes pequenos e grandes
%tem o comando \enquote
\usepackage[style=brazilian]{csquotes}
% from the manual
\renewcommand*{\mkcitation}[1]{ #1}
% magic for better quotes
%https://latex.org/forum/viewtopic.php?t=5444
\newenvironment*{smallquote}
   {\quote\footnotesize}
   {\endquote}
\SetBlockEnvironment{smallquote}

% Makeindex
% Não está gerando os índices
\usepackage{imakeidx}
\makeindex
\renewcommand{\printindex}{%
  \clearpage
  \phantomsection
  % Comente a linha abaixo se não quiser no sumário:
  % \addcontentsline{toc}{chapter}{Índice Remissivo}
  % Você pode usar \chapter{Índice Remissivo} aqui se quiser com número:
  \markboth{Índice Remissivo}{Índice Remissivo}%
  \input{\jobname.ind}%
}

% vamos usar o biblatex, recomendação
%citestyle=alphabetic,bibstyle=authortitle
\usepackage[ citestyle=authoryear,articlein=false,
style=ext-authoryear-comp
,natbib=true]{biblatex}


% fix "acedido" por algo mais razoável
% fiz "e alli" por "et al."
%\DefineBibliographyStrings{portuguese}{%
%  urlseen={Disponível em}
  %,andothers={et al.},andmore={et al.}
%  }
 % USE and other no campo author para forçar et al.
%\bibliographystyle{plainnat} %without url for book entries
% https://tex.stackexchange.com/questions/445858/changing-reference-style-in-biblatex
%https://tex.stackexchange.com/questions/10682/suppress-in-biblatex
% http://linorg.usp.br/CTAN/macros/latex/contrib/biblatex-contrib/biblatex-ext/biblatex-ext.pdf


%add document elements like a bibliography or an index to the Table of Contents
%\usepackage[nottoc,notlof,notlot]{tocbibind}

\usepackage{graphicx}

% novas keys de trim e valign (usado em vários
% tabelas com imagens
% export permite usar no includegraphics (exporta para ele)
\usepackage[export]{adjustbox}
%\graphicspath{ {./imagens/} }

% The Tkiz packages
\usepackage{pgf,tikz}
\usepackage{mathrsfs}
\usepackage{icomma}


\usepackage{comandos/pgf-pie}
\usepackage[]{tikz-3dplot}
\usetikzlibrary{fadings}

\usetikzlibrary{calc}
\usetikzlibrary{math}
\usetikzlibrary{shadows}
\usetikzlibrary{patterns}
\usetikzlibrary{automata}
\usetikzlibrary{positioning}
\usetikzlibrary{topaths}
\usetikzlibrary{intersections}
\usetikzlibrary{matrix}
\usetikzlibrary{mindmap}

\usetikzlibrary{datavisualization}
\usetikzlibrary{datavisualization.formats.functions}

\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}

\usetikzlibrary{shapes}
\usetikzlibrary{shapes.arrows}
\usetikzlibrary{shapes.symbols}
\usetikzlibrary{shapes.geometric}

\usetikzlibrary{decorations}
\usetikzlibrary{decorations.shapes}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{decorations.text}
\usepgflibrary{decorations.pathreplacing}
\usepgflibrary{decorations.markings}
\usepgflibrary{decorations.footprints}
\usepgflibrary{decorations.fractals}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.14}





%\usetikzlibrary{3d}



% esse parametro evita
% que o texto seja separado da imagem
% e facilita (muito) tratar o tamanho
\usepackage[inkscapelatex=false]{svg}

%controla onde ficam os floats
% não queremos que pulem uma entrada
% usa o commando \FloatBarrier
\usepackage[section]{placeins}

% para addlinespace e toprule
\usepackage{array}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{multicol}

% permite novos tipos de colunas em Tabelas
% e ainda uma definição dinâmica
\usepackage{tabularx}
\newcolumntype{T}{>{\centering \arraybackslash}X}

% icons do CC, tem comandos conjuntos
\usepackage{ccicons}
% http://linorg.usp.br/CTAN/fonts/ccicons/ccicons.pdf

%%%%%%%%%%%% ENUMITEM configurado
\usepackage{enumitem}
% queremos menos espaço entre os itens de uma lista
\setlist{nosep}
% criando uma check-box list
\newlist{todolist}{itemize}{2}
\setlist[todolist]{label=$\square$}
% https://tex.stackexchange.com/questions/13463/specifying-bullet-type-when-using-itemize#
% o normal é \circle - e * (muito feio)
%https://texblog.org/2008/10/16/lists-enumerate-itemize-description-and-how-to-change-them/
\renewcommand{\labelitemi}{$\bullet$}
\renewcommand{\labelitemii}{$\circ$}
\renewcommand{\labelitemiii}{$\diamond$}
\renewcommand{\labelitemiv}{$\circle}
% colocando . entre 1a para ficar 1.a
% nos \ref para \labels
% https://tex.stackexchange.com/questions/288407/no-dots-in-the-cross-reference-to-an-item-from-enumerate/288412#288412
% I want dots
\makeatletter
\renewcommand\p@enumii{\theenumi.}
\renewcommand\p@enumiii{\theenumi.\theenumi.}
\makeatother
%%%%%%%%%%%% ENUMITEM END

\usepackage{fancyvrb}

% Controlar a Marca Dagua
%\usepackage{draftwatermark}
%\SetWatermarkText{DRAFT}
%\SetWatermarkScale{5}
%\SetWatermarkColor[gray]{0.90}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
%,exercise}
%\numberwithin{Answer}{chapter}
%\numberwithin{Exercise}{chapter}

% para os exercícios
\usepackage{exsol}
\renewcommand{\exercisename}{Exercício}
\renewcommand{\exercisesname}{Exercícios}
\renewcommand{\solutionname}{Solução}
\renewcommand{\solutionsname}{Soluções}
\renewcommand{\seriesname}{Série}



% minicontent
%https://tex.stackexchange.com/questions/430594/use-minitoc-with-koma-script-scrbook
\usepackage{etoc}
\newcommand{\chaptertoc}[1][Conteúdo]{
	\etocsettocstyle{\addsec*{#1\\\rule{\textwidth}{0.4pt}}}
	{\bigskip}
	\etocsettocdepth{1}
	\localtableofcontents
}


% para caixas legais
\usepackage{tcolorbox}

%para underline que quebra linha
% usar \uline
% o normalem significa manter o \emph como é
% senão ele é alterado para underline
\usepackage[normalem]{ulem}

% Títulos mais legais
%\usepackage[Bjornstrup]{fncychap}
%\usepackage{titlesec}
%\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}

%Para usar casos de uso, verificar no capítulo
%comandos copiados da rede
\usepackage{comandos/usecases}

% Usando listagens
\usepackage{listings}
\lstset{extendedchars=true,basicstyle=\ttfamily,
		inputencoding=utf8,
            literate=%
            {ã}{{\~{a}}}1
            {á}{{\'{a}}}1
            {â}{{\^{a}}}1
            {à}{{\`{a}}}1
            {é}{{\'{e}}}1
            {è}{{\`{e}}}1
            {ê}{{\^{e}}}1
            {î}{{\^{i}}}1
            {í}{{\'{i}}}1
            {ô}{{\^{o}}}1
            {ó}{{\'{o}}}1
            {õ}{{\~{o}}}1
            {û}{{\^{u}}}1
            {ú}{{\'{u}}}1
            {ç}{{\c{c}}}1
            {Ç}{{\c{C}}}1
            {Ã}{{\~{A}}}1
            {À}{{\`{A}}}1
            {Â}{{\^{A}}}1
            {Á}{{\'{A}}}1
            {É}{{\'{E}}}1
            {Ê}{{\^{E}}}1
            {Î}{{\^{I}}}1
            {Í}{{\'{I}}}1
            {Ó}{{\'{O}}}1
            {Ô}{{\^{O}}}1
            {Õ}{{\~{O}}}1
            {Ú}{{\'{U}}}1
            }

\renewcommand{\lstlistlistingname}{Lista de Programas}
\renewcommand{\lstlistingname}{Lista de Programas}


\usepackage{wrapfig}

\usepackage{etoolbox} 
\usepackage{pdfpages}
\usepackage{setspace}

% para poder usar url
\usepackage{url,xurl}
\usepackage[hidelinks]{hyperref}

% lista de URLS
\newwrite\urllistfile
\immediate\openout\urllistfile=urllist.aux

\let\oldurl\url
\renewcommand{\url}[1]{\myurl{#1}}
\newcommand{\expurl}[2]{\myeurl{#1}{#2}}

\newcommand{\myurl}[1]{%
  \oldurl{#1}%
  \begingroup
    \edef\tempurl{#1}%
    \immediate\write\urllistfile{\noexpand\urllistentry{\tempurl}}%
  \endgroup
}

\newcommand{\myeurl}[2]{%
  \oldurl{#1}%
  \begingroup
    \edef\tempurl{#1}%
    \immediate\write\urllistfile{\noexpand\eurllistentry{\tempurl}{#2}}%
  \endgroup
}

\newcommand{\urllistentry}[1]{\item \oldurl{#1}}
\newcommand{\eurllistentry}[2]{\item \textbf{#2}: \oldurl{#1}}

\newcommand{\listofurls}{%
  \immediate\closeout\urllistfile
  \begin{itemize}
    \input{urllist.aux}
  \end{itemize}
}

